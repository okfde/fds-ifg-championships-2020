{"version":3,"sources":["teams.js","hero-animations.js","tournament-visual.js"],"names":["teams","bw","captain","firstName","lastName","state","img","by","be","bb","hb","hh","he","mv","ni","nw","rp","sl","sn","st","sh","th","getRandomArbitrary","min","max","Math","random","deslayTimes","result","i","last","push","createDelayTimes","animateImage","imgPath","container","containerSize","randomDelay","floor","length","setTimeout","el","imgEl","document","createElement","classList","add","setAttribute","appendChild","imgHeight","clientHeight","imgWidth","clientWidth","randomY","h","round","targetXPos","w","style","top","left","transform","concat","transition","removeChild","imgDirPath","querySelector","teamsArr","Object","values","l","renderAnimations","getElementById","src","replace","rounds","title","matches","number","team1","team2","request1","request2","winner","betURL","betPrefix","imagePath","loggedIn","namePlaceholder","userBets","loading","minBettableMatchNumber","bettingDeadline","Date","getBet","callback","data","request","XMLHttpRequest","open","setRequestHeader","value","onload","this","status","JSON","parse","response","window","alert","onerror","send","placeBet","e","preventDefault","team","dataset","matchNumber","match","now","name","prompt","substr","renderBetByMatch","error","user","encodeURIComponent","createTournament","rootContainer","innerHTML","matchesArr","createTeam","join","createMatches","createRounds","betStars","querySelectorAll","Array","from","forEach","betStar","addEventListener","key","props","isWinner","matchRequest","undefined","canBet","charAt","renderBet","bettable","pathHelperImage","textContent"],"mappings":"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","file":"main.js","sourcesContent":["const teams = {\n  bw: {\n    captain: {\n      firstName: 'Winfried',\n      lastName: 'Kretschmann'\n    },\n    state: 'Baden-W√ºrttemberg',\n    img: 'kretschmann.png'\n  },\n  by: {\n    captain: {\n      firstName: 'Markus',\n      lastName: 'S√∂der'\n    },\n    state: 'Bayern',\n    img: 'soeder.png'\n  },\n  be: {\n    captain: {\n      firstName: 'Michael',\n      lastName: 'M√ºller'\n    },\n    state: 'Berlin',\n    img: 'mueller.png'\n  },\n  bb: {\n    captain: {\n      firstName: 'Dietmar',\n      lastName: 'Woidke'\n    },\n    state: 'Brandenburg',\n    img: 'woidke.png'\n  },\n  hb: {\n    captain: {\n      firstName: 'Andreas',\n      lastName: 'Bovenschulte'\n    },\n    state: 'Bremen',\n    img: 'bovenschulte.png'\n  },\n  hh: {\n    captain: {\n      firstName: 'Peter',\n      lastName: 'Tschentscher'\n    },\n    state: 'Hamburg',\n    img: 'tschentscher.png'\n  },\n  he: {\n    captain: {\n      firstName: 'Volker',\n      lastName: 'Bouffier'\n    },\n    state: 'Hessen',\n    img: 'bouffier.png'\n  },\n  mv: {\n    captain: {\n      firstName: 'Manuela',\n      lastName: 'Schwesig'\n    },\n    state: 'Mecklenburg-Vorpommern',\n    img: 'schwesig.png'\n  },\n  ni: {\n    captain: {\n      firstName: 'Stephan',\n      lastName: 'Weil'\n    },\n    state: 'Niedersachsen',\n    img: 'weil.png'\n  },\n  nw: {\n    captain: {\n      firstName: 'Armin',\n      lastName: 'Laschet'\n    },\n    state: 'Nordrhein-Westfalen',\n    img: 'laschet.png'\n  },\n  rp: {\n    captain: {\n      firstName: 'Malu',\n      lastName: 'Dreyer'\n    },\n    state: 'Rheinland-Pfalz',\n    img: 'dreyer.png'\n  },\n  sl: {\n    captain: {\n      firstName: 'Tobias',\n      lastName: 'Hans'\n    },\n    state: 'Saarland',\n    img: 'hans.png'\n  },\n  sn: {\n    captain: {\n      firstName: 'Michael',\n      lastName: 'Kretschmer'\n    },\n    state: 'Sachsen',\n    img: 'kretschmer.png'\n  },\n  st: {\n    captain: {\n      firstName: 'Reiner',\n      lastName: 'Haseloff'\n    },\n    state: 'Sachsen-Anhalt',\n    img: 'haseloff.png'\n  },\n  sh: {\n    captain: {\n      firstName: 'Daniel',\n      lastName: 'G√ºnther'\n    },\n    state: 'Schleswig-Holstein',\n    img: 'guenther.png'\n  },\n  th: {\n    captain: {\n      firstName: 'Bodo',\n      lastName: 'Ramelow'\n    },\n    state: 'Th√ºringen',\n    img: 'ramelow.png'\n  },\n}","(function(){\n\n  function init () {\n    const pathHelperImage = document.getElementById('path-helper')\n    const imgDirPath = pathHelperImage.src.replace('1x1.png', '')\n    renderAnimations(imgDirPath)\n  }\n\n  function renderAnimations (imgDirPath) {\n    const container = document.querySelector('.hero')\n    const containerSize = { w: container.clientWidth, h: container.clientHeight }\n    const teamsArr = Object.values(teams)\n\n    // create, insert and animate images\n    const allImgs = []\n    for (let i = 0, l = teamsArr.length; i < l; i++) {\n      const imgPath = imgDirPath + teamsArr[i].img\n      animateImage(imgPath, container, containerSize)\n    }\n  }\n\n  function renderImage (imgPath) {\n    const el = document.createElement('img')\n    el.classList.add('floating-head')\n    el.setAttribute('src', imgPath)\n    return el\n  }\n\n  function getRandomArbitrary(min, max) {\n    return Math.random() * (max - min) + min;\n  }\n\n  function getAnimationTime () {\n    const miliseconds = 20000\n    return miliseconds\n  }\n\n  function createDelayTimes () {\n    const result = []\n    let i = 16\n    let last = 0\n    while (i--) {\n      last = last + getRandomArbitrary(2000, 2500)\n      result.push(last)\n    }\n    return result\n  }\n\n  const deslayTimes = createDelayTimes()\n  function getDelayTime () {\n    const randomTime = deslayTimes[Math.floor(Math.random() * deslayTimes.length)];\n    return randomTime\n  }\n  \n  function animateImage (imgPath, container, containerSize) {\n    const randomDelay = getDelayTime()\n\n    setTimeout(() => {\n      const imgEl = renderImage(imgPath)\n      container.appendChild(imgEl)\n      \n      const miliseconds = getAnimationTime()\n      const imgHeight = imgEl.clientHeight\n      const imgWidth = imgEl.clientWidth\n      const minY = imgHeight / 2\n      const maxY = containerSize.h - Math.round(imgHeight * 1.5)\n      const randomY = getRandomArbitrary(minY, maxY)\n      const targetXPos = containerSize.w + imgWidth\n  \n      imgEl.style.top = randomY + 'px'\n      imgEl.style.left = -(imgWidth) + 'px'\n      imgEl.style.transform = `translate(${targetXPos}px, 0)`;\n      imgEl.style.transition = `all ${miliseconds}ms linear`;\n      setTimeout(() => {\n        container.removeChild(imgEl)\n        animateImage(imgPath, container, containerSize)\n      }, miliseconds);      \n    }, randomDelay)\n  }\n\n  init()\n\n}())","(function(){\n\n  const rounds = [\n    {\n      title: 'Runde 1',\n      matches: [\n        {\n          number: 1,\n          team1: 'sh',\n          team2: 'st',\n          request1: '188777',\n          request2: '188791',\n          winner: 'sh'\n        },\n        {\n          number: 2,\n          team1: 'hb',\n          team2: 'mv',\n          request1: '188785',\n          request2: '188790',\n          winner: 'hb'\n        },\n        {\n          number: 3,\n          team1: 'rp',\n          team2: 'he',\n          request1: '188789',\n          request2: '188782',          \n          winner: 'he'\n        },\n        {\n          number: 4,\n          team1: 'be',\n          team2: 'bb',\n          request1: '188779',\n          request2: '188787',\n          winner: 'bb'\n        },\n        {\n          number: 5,\n          team1: 'nw',\n          team2: 'ni',\n          request1: '188788',\n          request2: '188783',\n          winner: 'ni'\n        },\n        {\n          number: 6,\n          team1: 'sn',\n          team2: 'by',\n          request1: '188784',\n          request2: '188780',\n          winner: 'sn'\n        },\n        {\n          number: 7,\n          team1: 'hh',\n          team2: 'bw',\n          request1: '188786',\n          request2: '188792',\n          winner: 'hh'\n        },\n        {\n          number: 8,\n          team1: 'sl',\n          team2: 'th',\n          request1: '188781',\n          request2: '188793',\n          winner: 'sl'\n        },\n      ]\n    },\n    {\n      title: 'Runde 2',\n      matches: [\n        {\n          number: 9,\n          team1: 'sh',\n          team2: 'hb',\n          winner: 'sh'\n        },\n        {\n          number: 10,\n          team1: 'he',\n          team2: 'bb',\n          winner: 'he'\n        },\n        {\n          number: 11,\n          team1: 'ni',\n          team2: 'sn',\n          winner: 'ni'\n        },\n        {\n          number: 12,\n          team1: 'hh',\n          team2: 'sl',\n          winner: ''\n        },\n      ]\n    },\n    {\n      title: 'Halbfinale',\n      matches: [\n        {\n          number: 13,\n          team1: 'sh',\n          team2: 'he',\n          winner: ''\n        },\n        {\n          number: 14,\n          team1: 'ni',\n          team2: '',\n          winner: ''\n        },\n      ]\n    },\n    {\n      title: 'Finale',\n      matches: [\n        // {\n        //   number: 15,\n        //   team1: '',\n        //   team2: '',\n        //   winner: ''\n        // },\n      ]\n    },\n  ]\n\n  const betURL = '/tippspiel/'\n  const betPrefix = 'fds_meisterschaften_2020_'\n\n  var imagePath = \"img/\"\n  var loggedIn = false\n  var namePlaceholder = ''\n  var userBets = {}\n  var loading = false\n  var minBettableMatchNumber = 9\n  var bettingDeadline = new Date(1595412000 * 1000) // Wed, 22 Jul 12:00 UTC + 2\n\n  function getBet(callback, data) {\n    var request = new XMLHttpRequest();\n    request.open(data ? 'POST' : 'GET', betURL, true);\n    if (data) {\n      request.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded; charset=UTF-8');\n      request.setRequestHeader('X-CSRFToken', document.querySelector('[name=csrfmiddlewaretoken]').value)\n    }\n    request.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\n    request.onload = function() {\n      if (this.status >= 200 && this.status < 400) {\n        // Success!\n        var data = JSON.parse(this.response);\n        callback(data)\n      } else {\n        // We reached our target server, but it returned an error\n        window.alert('Error')\n      }\n    };\n    request.onerror = function() {\n      window.alert('Error')\n    };\n    request.send(data);\n  }\n\n  function init () {\n    const pathHelperImage = document.getElementById('path-helper')\n    imagePath = pathHelperImage.src.replace('1x1.png', '')\n    loggedIn = document.getElementById('userDropdownMenu') !== null\n    if (loggedIn) {\n      namePlaceholder = document.querySelector('#userDropdownMenu span').textContent\n    }\n\n    if (!loggedIn) {\n      createTournament()\n    } else {\n      getBet(function (data) {\n        userBets = data.user || {}\n        createTournament()\n      })\n    }\n  }\n\n  function placeBet (e) {\n    e.preventDefault()\n    const el = this\n    const team = el.dataset.team\n    const matchNumber = el.dataset.match\n\n    if (!loggedIn) {\n      window.alert(\"Sie m√ºssen eingeloggt sein, um am Tippspiel teilzunehmen.\")\n      return\n    }\n    const now = new Date()\n    if (bettingDeadline && bettingDeadline < now) {\n      window.alert(\"Die aktuelle Tipp-Spiel-Runde ist abgelaufen!\")\n      return\n    }\n\n    if (!userBets[betPrefix + \"name\"]) {\n      let name = window.prompt(\"Unter welchem Namen m√∂chten Sie in der Tipp-Tabelle erscheinen? Durch die Eingabe stimmen Sie unseren Teilnahmebedingungen zu.\", namePlaceholder);\n      if (name === null) {\n        return\n      }\n      userBets[betPrefix + \"name\"] = name.substr(0, 50)\n    }\n    if (loading) {\n      window.alert(\"Ihre letzte Aktion wird noch verarbeitet.\")\n      return\n    }\n\n    userBets[betPrefix + matchNumber] = team\n    loading = true\n    renderBetByMatch(matchNumber, true)\n\n    getBet(function (data) {\n      if (data.error) {\n        window.alert(data.error)\n      } else {\n        userBets = data.user || {}\n      }\n      loading = false\n      renderBetByMatch(matchNumber, false)\n    }, `match=${matchNumber}&bet=${team}&name=${encodeURIComponent(userBets[betPrefix + \"name\"])}`)\n\n  }\n\n\n  function createTournament () {\n    rootContainer.innerHTML =`\n      <div class=\"tournament-bracket tournament-bracket--rounded\">\n        ${createRounds(rounds)}\n      </div>\n      `\n    const betStars = rootContainer.querySelectorAll('.tournament-bracket__tip a')\n    Array.from(betStars).forEach((betStar) => {\n      betStar.addEventListener('click', placeBet)\n    })\n  }\n\n  function createRounds (rounds) {\n    let result = ''\n    for (let i = 0, l = rounds.length; i < l; i++) {\n      result += createRound(rounds[i], i + 1)\n    }\n    return result\n  }\n\n  function createRound (round) {\n    return `\n    <div class=\"tournament-bracket__round\">\n      <h3 class=\"tournament-bracket__round-title\">${round.title}</h3>\n      ${round.matches && round.matches.length > 0 ? `\n      <ul class=\"tournament-bracket__list\">\n        ${createMatches(round.matches)}\n      </ul>\n      ` : ''}\n    </div>\n    `\n  }\n\n  function createMatches (matchesArr) {\n    let result = []\n    for (let i = 0, l = matchesArr.length; i < l; i++) {\n      result.push(createMatch(matchesArr[i]))\n    }\n    return result.join('')\n  }\n\n  function createMatch (match) {\n    const team1 = teams[match.team1]\n    const team2 = teams[match.team2]\n\n    return `\n    <li class=\"tournament-bracket__item\">\n      <div class=\"tournament-bracket__match\" tabindex=\"0\">\n        <table class=\"tournament-bracket__table\">\n          <tbody class=\"tournament-bracket__content\">\n            ${createTeam(match.team1, team1, match.winner === match.team1, match, match.request1)}\n            ${createTeam(match.team2, team2, match.winner === match.team2, match, match.request2)}\n          </tbody>\n        </table>\n      </div>\n    </li>\n    `\n  }\n\n  function createTeam (key, props, isWinner, match, matchRequest) {\n    if (props === undefined) {\n      return `\n      <tr class=\"tournament-bracket__team\">\n      <td class=\"tournament-bracket__image\" style=\"height:28px\"></td>\n      <td class=\"tournament-bracket__label text-center w-100\"><strong>?</strong></td>\n      </tr>`\n    }\n    const matchNumber = match.number\n    const title = `${props.captain.firstName} ${props.captain.lastName} (${props.state})`\n    const now = new Date()\n    const canBet = matchNumber >= minBettableMatchNumber && (!bettingDeadline || now < bettingDeadline)\n    return `\n    <tr class=\"tournament-bracket__team\">\n      <td class=\"tournament-bracket__image\" title=\"${title}\"><img src=\"${imagePath}${props.img}\"></td>\n      <td class=\"tournament-bracket__label\" title=\"${title}\">\n        <span class=\"tournament-bracket__name\">\n          ${matchRequest ? `<a href=\"/a/${matchRequest}\">` : ''}\n          ${props.captain.firstName.charAt(0)}. ${props.captain.lastName}\n          ${matchRequest ? '</a>' : ''}\n        </span>&nbsp;<span class=\"tournament-bracket__token\" title=\"${props.state}\">(${key})</span>\n      </td>\n      <td class=\"tournament-bracket__result\" title=\"Gewinner\">${isWinner ? 'üèÜÔ∏è&nbsp;' : ''}</td>\n      <td class=\"tournament-bracket__tip\">\n        ${ canBet ?\n          `<a href=\"#\" data-team=\"${key}\" data-match=\"${matchNumber}\">${renderBet(key, matchNumber, true)}</a>` :\n          renderBet(key, matchNumber, false)\n        }\n      </td>\n    </tr>\n    `\n  }\n\n  function renderBetByMatch (matchNumber, loading) {\n    const betStars = rootContainer.querySelectorAll(`.tournament-bracket__tip a[data-match=\"${matchNumber}\"]`)\n    Array.from(betStars).forEach((betStar) => {\n      if (loading) {\n        betStar.innerHTML = `<i class=\"fa fa-spinner\" aria-hidden=\"true\"></i>`\n      } else {\n        betStar.innerHTML = renderBet(betStar.dataset.team, matchNumber, true)\n      }\n    })\n  }\n\n  function renderBet (team, matchNumber, bettable) {\n    if (userBets) {\n      const betted = userBets[betPrefix + matchNumber] === team\n      if (betted) {\n        return `<i class=\"fa fa-star\" aria-hidden=\"true\"></i>`\n      }\n    }\n    if (bettable) {\n      return `<i class=\"fa fa-star-o\" aria-hidden=\"true\"></i>`\n    }\n    return ``\n  }\n\n  const rootContainer = document.getElementById('tournament-visual')\n  init();\n\n}())\n"]}